# 每周一道算法题：


    ```java

    ```
# 每周一篇文章点评：
文章链接： </br>

点评：
# 每周一个小技巧：
**SpringBoot 从2.3.0.RELEASE 开始支持 web 服务器的优雅停机** </br>

开启优雅停机：
```yaml
server:
  # 设置关闭方式为优雅关闭
  shutdown: graceful

spring:
  lifecycle:
    # 优雅关闭超时时间, 默认30s
    timeout-per-shutdown-phase: 30s
```
优雅停机的执行流程:

1.SpringBoot 通过 Shutdown Hook 来注册 doclose() 回调方法，在应用关闭的时候触发执行。</br>
2.SpringBoot 在创建 webserver的时候，会注册实现 smartLifecycel 接口的 bean,用来优雅关闭 tomcat。</br>
3.doClose()在销毁 bean, 关闭容器之前会执行所有实现 Lifecycel 接口 bean 的 stop方法，并且会按 Phase 值分组, phase 大的优先执行。</br>
4.WebServerGracefulShutdownLifecycle，Phase=Inter.MAX_VALUE，处于最优先执行序列，所以 tomcat 会先触发优雅关闭，并且tomcat 关闭方法是异步执行的，主线会继续调用执行本组其他 bean 的关闭方法，然后等待所有 bean 关闭完毕，超过等待时间，会执行下一组 Lifecycle bean 的关闭。</br>

# 每周一篇学习分享：

